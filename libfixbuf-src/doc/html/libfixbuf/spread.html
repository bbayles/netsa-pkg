
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>fixbuf- Documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <link rel="stylesheet" type="text/css" href="../../site/style.css" />
        <link rel="stylesheet" type="text/css" href="doxygen.css">
        <link rel="stylesheet" type="text/css" href="tabs.css">
</head>
<body>
    <div id="p-body">
      <div id="l-header">
        <img src="../../site/sei-logo.png" id="l-sei-logo"
            alt="Software Engineering Institute | Carnegie Mellon&copy;" />
        <div id="l-netsa-logo"><a id="l-netsa-name" href="../../index.html"><b>CERT NetSA Security Suite</b></a></div>
        <div id="l-netsa-motto">Monitoring for Large-Scale Networks</div>
        <h1 class="l-page-title">fixbuf</h1>
        <span id="l-subtitle">Documentation</span>
      </div><!-- l-header -->
      <div id="l-content">
        <div id="l-sidebar">
          <div class="p-sidebar-section">
            <h1><a href="../index.html">fixbuf</a></h1>
            <ul>
              <li><a href="index.html">Documentation</a></li>
              <li><a href="../download.html">Downloads</a></li>
	      <li><a href="../../pyfixbuf/index.html">pyfixbuf</a></li>
            </ul>
          </div><!-- p-sidebar-section -->
        </div><!-- l-sidebar -->
      <div id="top"> <!-- need this for doxygen -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Spread Collectors </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How-To use the Spread Protocol:</p>
<p>The instructions for using Spread in libfixbuf are similar to the setup for reading from IPFIX files. As described above in the Exporters section, the first step is to create an fbInfoModel_t and fbSession_t. Next, create the internal template(s) and add it to the fbSession_t. Define an fbSpreadParams_t and set the session, groups to subscribe to, and Spread Daemon name. Example usage: </p>
<div class="fragment"><div class="line">*       fbSpreadParams_t spread;</div>
<div class="line">*       <span class="keywordtype">char</span> *groups[25];</div>
<div class="line">*       groups[0] = strdup(<span class="stringliteral">&quot;group1&quot;</span>);</div>
<div class="line">*       groups[1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line">*       spread.daemon = <span class="stringliteral">&quot;daemon1&quot;</span></div>
<div class="line">*       spread.groups = groups;</div>
<div class="line">*       spread.session = session;</div>
<div class="line">*       collector = fbCollectorAllocSpread(0, &amp;spread, &amp;err);</div>
<div class="line">*      </div>
</div><!-- fragment --><p>Then create an fbCollector_t to connect and listen to the Spread Daemon using fbCollectorAllocSpread().</p>
<p>With an fbSession_t and fbcollector_t available, create a buffer for writing via <a class="el" href="public_8h.html#a71b2a64c7d212e9c3562388b95b993ab" title="Allocate a new buffer for collection. ">fBufAllocForCollection()</a>. Set the internal template ID with <a class="el" href="public_8h.html#a28c6c56234351a793fd513b212bd31b8" title="Set the internal template on a buffer to the given template ID. ">fBufSetInternalTemplate()</a>, and use <a class="el" href="public_8h.html#a11c40f1d55e2d4b29b40eb4c07ce5ee7" title="Retrieve a record from a buffer. ">fBufNext()</a> to read records from IPFIX Messages published to the group your collector is subscribing to.</p>
<p>To view all the Spread Groups that were sent the incoming record, call fbCollectorGetSpreadReturnGroups() on the collector. </p>
</div></div><!-- contents -->
      </div><!-- l-content -->
      <div id="l-footer">&copy; 2006-2018 Carnegie Mellon University</div>
    </div><!-- p-body -->
</body>
</html>
