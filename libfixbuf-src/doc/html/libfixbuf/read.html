<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libfixbuf: IPFIX File Collectors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">IPFIX File Collectors </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >How-To Read IPFIX Files.</p>
<p >Using fixbuf to read from IPFIX Files as a Collecting Process is very much like the <a class="el" href="export.html">Export case</a>. Create an fbInfoModel_t using <a class="el" href="public_8h.html#a23b1973cadfc63b05fabe6091ce48875" title="Allocates a new information model.">fbInfoModelAlloc()</a> and any additional, vendor-specific information elements using <a class="el" href="public_8h.html#ae06a524366afa6827d7e5abb1c33c0d0" title="Adds a single information element to an information model.">fbInfoModelAddElement()</a>, <a class="el" href="public_8h.html#a202bfa2340263229893a38de18670179" title="Adds multiple information elements in an array to an information model.">fbInfoModelAddElementArray()</a>, <a class="el" href="public_8h.html#af72db51fd417df411a82909c5fd5d84d" title="Adds information specified in the given XML file to the information model.">fbInfoModelReadXMLFile()</a>, or <a class="el" href="public_8h.html#a2bbcf6d4a777ed7e0a2c364e0662b9f3" title="Adds information specified in the given XML data to the information model.">fbInfoModelReadXMLData()</a>. Next create an fbSession_t using <a class="el" href="public_8h.html#a19d0dfe113d61cdabf601ca79c3049c8" title="Allocates a transport session state container.">fbSessionAlloc()</a> and add internal templates via <a class="el" href="public_8h.html#a2e4baf6d2142eca4cb526b1e80628bf8" title="Adds a template to a session.">fbSessionAddTemplate()</a>. External templates do not need to be added for collection, as they will be loaded from templates in the file.</p>
<p >Then create an fbCollector_t to encapsulate the file, using the <a class="el" href="public_8h.html#ac6b18ba14c78ab54faa34cacc56ac0e1" title="Allocates a collecting process endpoint for an open file.">fbCollectorAllocFP()</a> or <a class="el" href="public_8h.html#ac5c100aa9ec1e3e57cc14a2b8c0c0628" title="Allocates a collecting process endpoint for a named file.">fbCollectorAllocFile()</a> calls.</p>
<p >With an fbSession_t and an fbCollector_t available, create a buffer for writing via <a class="el" href="public_8h.html#a4dcbc472c9fc394ecb23e1b6b2887894" title="Allocates a new buffer for collection.">fBufAllocForCollection()</a>. Set the internal template ID with <a class="el" href="public_8h.html#a28c6c56234351a793fd513b212bd31b8" title="Sets the internal template on a buffer to the given template ID.">fBufSetInternalTemplate()</a>, and use <a class="el" href="public_8h.html#a11c40f1d55e2d4b29b40eb4c07ce5ee7" title="Retrieves a record from a Buffer associated with a collecting process.">fBufNext()</a> to read records from IPFIX Messages and Messages from the input stream.</p>
<p >By default, <a class="el" href="public_8h.html#a11c40f1d55e2d4b29b40eb4c07ce5ee7" title="Retrieves a record from a Buffer associated with a collecting process.">fBufNext()</a> will consume an IPFIX Message from the input stream when the end of the message buffer is reached on read. The <a class="el" href="public_8h.html#a661f4cc21e726345d3e22372af33c2d1" title="Sets the automatic (read/write) mode flag on a buffer.">fBufSetAutomaticMode()</a> call can be used to modify this behavior, causing <a class="el" href="public_8h.html#a11c40f1d55e2d4b29b40eb4c07ce5ee7" title="Retrieves a record from a Buffer associated with a collecting process.">fBufNext()</a> to return FB_ERROR_EOM when at end of message. Use this if your application requires manual control of message collection. In this case, <a class="el" href="public_8h.html#a7c89ee8cc9d536e1ceafb371513a6479" title="Reads a new message into a buffer using the associated collecting process endpoint.">fBufNextMessage()</a> will consume a Message from the input stream. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>
